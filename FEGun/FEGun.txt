--Forked from 0xPeeps M9
--UI
local PLASMA_GUN_V20 = Instance.new("ScreenGui")
local INGUI = Instance.new("Frame")
local UICorner = Instance.new("UICorner")
local TextLabel = Instance.new("TextLabel")
local Divider = Instance.new("Frame")
local RepositionGun = Instance.new("TextButton")
local UICorner_2 = Instance.new("UICorner")
local CopyDiscord = Instance.new("TextButton")
local UICorner_3 = Instance.new("UICorner")
PLASMA_GUN_V20.Name = "PLASMA_GUN_V2.0"
PLASMA_GUN_V20.Parent = game.CoreGui
INGUI.Name = "INGUI"
INGUI.Parent = PLASMA_GUN_V20
INGUI.BackgroundColor3 = Color3.fromRGB(42, 42, 42)
INGUI.Position = UDim2.new(0.777589142, 0, 0.856972575, 0)
INGUI.Size = UDim2.new(0, 245, 0, 108)
INGUI.Visible = false
UICorner.CornerRadius = UDim.new(0, 2)
UICorner.Parent = INGUI
TextLabel.Parent = INGUI
TextLabel.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
TextLabel.BackgroundTransparency = 1.000
TextLabel.Position = UDim2.new(0.5, -122, 0, 0)
TextLabel.Size = UDim2.new(0, 245, 0, 25)
TextLabel.Font = Enum.Font.Arial
TextLabel.Text = "Plasma Gun"
TextLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
TextLabel.TextSize = 16.000
TextLabel.TextWrapped = true
Divider.Name = "Divider"
Divider.Parent = INGUI
Divider.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Divider.BorderSizePixel = 0
Divider.Position = UDim2.new(0, 0, 0.234674588, 0)
Divider.Size = UDim2.new(0, 245, 0, 1)
RepositionGun.Name = "RepositionGun"
RepositionGun.Parent = INGUI
RepositionGun.BackgroundColor3 = Color3.fromRGB(63, 63, 63)
RepositionGun.Position = UDim2.new(0.5, -114, 0.423690915, -13)
RepositionGun.Size = UDim2.new(0, 228, 0, 27)
RepositionGun.Font = Enum.Font.SourceSans
RepositionGun.Text = "Reposition Gun"
RepositionGun.TextColor3 = Color3.fromRGB(255, 255, 255)
RepositionGun.TextSize = 14.000
RepositionGun.MouseButton1Down:connect(function()
	loadstring(game:HttpGet('https://virtuallization.com/FEGun/Positioning.txt'))()
end)
UICorner_2.CornerRadius = UDim.new(0, 2)
UICorner_2.Parent = RepositionGun
CopyDiscord.Name = "CopyDiscord"
CopyDiscord.Parent = INGUI
CopyDiscord.BackgroundColor3 = Color3.fromRGB(63, 63, 63)
CopyDiscord.Position = UDim2.new(0.5, -114, 0.766283512, -13)
CopyDiscord.Size = UDim2.new(0, 228, 0, 27)
CopyDiscord.Font = Enum.Font.SourceSans
CopyDiscord.Text = "Copy Discord"
CopyDiscord.TextColor3 = Color3.fromRGB(255, 255, 255)
CopyDiscord.TextSize = 14.000
CopyDiscord.MouseButton1Down:connect(function()
setclipboard('https://virtuallization.com/discord')
end)
UICorner_3.CornerRadius = UDim.new(0, 2)
UICorner_3.Parent = CopyDiscord


local API={};

function API:CreateTool(hat)
    local tool=Instance.new"Tool";
    local handle=hat["Handle"];
    handle:FindFirstChildOfClass"Weld":Destroy();
    handle.Massless=true;
    handle.Parent=tool;
    return tool;
end

getgenv()["ToolAPI"]=API;


function BombCreate()
temp_bombs = {}
for i,v in pairs(game:GetService('Players'):GetPlayers()) do
    if v:FindFirstChild('Backpack') and v.Backpack:FindFirstChild('ImpulseGrenade') then
        table.insert(temp_bombs,v.Backpack.ImpulseGrenade.CreateGrenade)
    end
end
return temp_bombs[math.random(1,#temp_bombs)]
end


local function getPushRemote()
    for i, v in ipairs(game:GetService("Players"):GetPlayers()) do
        local tool = v.Character and (v.Character:FindFirstChild("Push")) or v.Backpack:FindFirstChild("Push")
        
        if tool then
            return tool.PushEvent
        end
    end
end

local function push(force)local r = getPushRemote(); for i = 1, force do r:FireServer();end;end;

local plr = game.Players.LocalPlayer
local mouse = plr:GetMouse()

local player=game:service"Players"["LocalPlayer"];
local character=player["Character"];
local hats="PlasmaSpitterAccessory";
local tools={};

function loadAnimation(ID,speed)
    local animation=Instance.new"Animation";
    animation.AnimationId="rbxassetid://"..tostring(ID);
    local loaded=character["Humanoid"]:LoadAnimation(animation);
    loaded:Play();
    loaded:AdjustSpeed(speed);
end

for i,v in next,character["Humanoid"]:GetAccessories() do
	if hats:find(v.Name) then
		warn(("%s found!"):format(v.Name));
		tools[v.Name]=ToolAPI:CreateTool(v);
		tools[v.Name].Parent=player["Backpack"];
	end
end

tools["PlasmaSpitterAccessory"].Grip=tools["PlasmaSpitterAccessory"].Grip*CFrame.new(0,0,0.4);
for i,v in next,tools do
	v.Activated:connect(function()
    local remote = BombCreate()
v1 = Vector3.new(1, 1, 1)
v2 = mouse.Hit
remote:FireServer(v1,v2)
    wait(2.9)
		loadAnimation(95383980,1);
        push(10)
	end)
    v.Equipped:connect(function()
    INGUI.Visible = true
    game:GetService("Players").LocalPlayer.Character["Local Ragdoll"].Disabled = true
loadstring(game:HttpGet('https://virtuallization.com/FEGun/Positioning.txt'))()
end)
  v.Unequipped:connect(function()
  INGUI.Visible = false
  game:GetService("Players").LocalPlayer.Character["Local Ragdoll"].Disabled = false
  end)

	v.Name="Plasma Gun";
	v.ToolTip="Plasma Gun By Xiba";
end
